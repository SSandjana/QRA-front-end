<body class="container pt-5 pb-5 mt-5">
<main class="form-signin bg-light p-5 m-auto rounded-3 shadow-5-strong">
  <form *ngIf="!registrationSuccessful" (ngSubmit)="onSubmit()" [formGroup]="registrationForm">
    <!--<div class="form-floating mb-3">
      <img class="img-fluid" src="assets/logo.png" alt="" height="100">
    </div>-->
    <div class="row">
      <div class="col">
        <div class="mb-3">
          <label for="firstname" class="form-label ">Voornaam</label>
          <input type="text" class="form-control" id="firstname" name="firstname" formControlName="firstname"
                 [(ngModel)]="user.firstName">
          <div *ngIf="submitted && form.firstname.errors" class="text-danger">
            <div *ngIf="form.firstname.errors.required">Voornaam is verplicht</div>
          </div>
        </div>
        <div class="mb-3">
          <label for="idNumber" class="form-label ">ID-nummer</label>
          <input type="text" class="form-control" id="idNumber" name="idNumber" formControlName="idNumber"
                 [(ngModel)]="user.idNumber">
          <div *ngIf="submitted && form.idNumber.errors" class="text-danger">
            <div *ngIf="form.idNumber.errors.required">ID-nummer is verplicht</div>
          </div>
        </div>
        <div class="mb-3">
          <label for="telephone" class="form-label ">Telefoon</label>
            <div class="wrapper">
              <ngx-intl-tel-input
                [cssClass]="'custom'"
                [preferredCountries]="preferredCountries"
                [enableAutoCountrySelect]="true"
                [enablePlaceholder]="true"
                [searchCountryFlag]="false"
                [searchCountryField]="[
          SearchCountryField.Iso2,
          SearchCountryField.Name
        ]"
                [selectFirstCountry]="false"
                [selectedCountryISO]="CountryISO.Suriname"
                [maxLength]="15"
                [phoneValidation]="true"
                [separateDialCode]="separateDialCode"
                [numberFormat]="PhoneNumberFormat.International"
                name="telephone"
                formControlName="telephone"
                id="telephone"
                [(ngModel)]="user.telephone"
              >
              </ngx-intl-tel-input>
            </div>
          <div *ngIf="submitted && form.telephone.errors" class="text-danger">
            <div *ngIf="form.telephone.errors.required">Telefoon nummer is verplicht</div>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="mb-3">
          <label for="lastname" class="form-label ">Achternaam</label>
          <input type="text" class="form-control" id="lastname" name="lastname"
                 formControlName="lastname" [(ngModel)]="user.lastName">
          <div *ngIf="submitted && form.lastname.errors" class="text-danger">
            <div *ngIf="form.lastname.errors.required">Achternaam is verplicht</div>
          </div>
        </div>


        <div class="col">
<!--          <div class="mb-3">-->
<!--            <label class="form-label ">Gender</label>-->
<!--            <select name="gender" class="form-control">-->
<!--              <option value="" [selected]="true" disabled="true">&#45;&#45; Please choose gender &#45;&#45;</option>-->
<!--              <option *ngFor="let gender of genders">-->
<!--                {{gender.viewValue}}-->
<!--              </option>-->
<!--            </select>-->
<!--          </div>-->
          <div class="mb-3">
            <label for="gender" class="form-label">Selecteer uw geslacht</label>
            <select class="form-select" id="gender" name="gender" formControlName="gender">
              <option *ngIf="genders == null || genders.length == 0">Geen geslacht beschikbaar</option>
              <option></option>
              <option *ngFor="let gender of genders" value="{{gender.viewValue}}">{{gender.viewValue}}</option>
            </select>
            <div *ngIf="submitted && form.gender.errors" class="text-danger">
              <div *ngIf="form.gender.errors.required">Geslacht is verplicht</div>
            </div>
          </div>
        </div>


        <div class="mb-3">
          <label for="dateOfBirth" class="form-label ">Geboorte datum</label>
          <input type="date" class="form-control" id="dateOfBirth" name="dateOfBirth"
                 formControlName="dateOfBirth" [(ngModel)]="user.dob">
          <div *ngIf="submitted && form.dateOfBirth.errors" class="text-danger">
            <div *ngIf="form.dateOfBirth.errors.required">Geboorte datum is verplicht</div>
          </div>
        </div>
      </div>
    </div>
    <div class="mb-3">
      <label for="email" class="form-label ">E-mail</label>
      <input type="email" class="form-control" id="email" name="email" formControlName="email"
             [(ngModel)]="user.email">
      <div *ngIf="submitted && form.email.errors" class="text-danger">
        <div *ngIf="form.email.errors.required">E-mail is verplicht</div>
        <div *ngIf="form.email.errors.email">E-mail is niet geldig</div>

      </div>
    </div>
    <div class="mb-3">
      <label for="userName" class="form-label ">Gebruikersnaam</label>
      <input type="text" class="form-control" id="userName" name="userName"
             formControlName="userName" [(ngModel)]="user.username">
      <div *ngIf="submitted && form.userName.errors" class="text-danger">
        <div *ngIf="form.userName.errors.required">Gebruikersnaam is verplicht</div>
      </div>
    </div>
    <div class="mb-3">
      <label for="password" class="form-label">Wachtwoord</label>
      <input type="password" class="form-control" id="password" name="password"
             formControlName="password" [(ngModel)]="user.password">
      <div *ngIf="submitted && form.password.errors" class="text-danger">
        <div *ngIf="form.password.errors.required">Wachtwoord is verplicht</div>
        <div *ngIf="form.password.errors.minlength">Wachtwoord moet minstens 8 karakters bevatten</div>
      </div>
    </div>
    <div class="mb-3">
      <label for="confirmPassword" class="form-label">Bevestig wachtwoord</label>
      <input type="password" class="form-control" id="confirmPassword" name="" formControlName="confirmPassword">
      <div *ngIf="submitted && form.confirmPassword.errors" class="text-danger">
        <div *ngIf="form.confirmPassword.errors.required">Wachtwoord bevestiging is verplicht</div>
        <div *ngIf="form.confirmPassword.errors.mustMatch">Wachtwoord bevestiging kwam niet overeen</div>
      </div>
    </div>
    <div class="mb-3">

      <label for="roleSelect" class="form-label">Selecteer gebruikers rol</label>

      <div class="row">
        <div class="col-12">
          <select class="form-select" id="roleSelect" name="roleSelect"
                  formControlName="roleSelect" [(ngModel)]="user.roleId">
            <option *ngIf="allRoles == null || allRoles.length == 0">Geen rollen beschikbaar</option>
            <option></option>
            <option *ngFor="let role of allRoles"
                    value="{{role?.id}}">{{role?.type}}</option>
          </select>
          <div *ngIf="submitted && form.roleSelect.errors" class="text-danger">
            <div *ngIf="form.roleSelect.errors.required">Rol is verplicht</div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <button class="w-100 btn btn-md btn-primary" id="submit-button" type="submit">Opslaan</button>
      </div>
      <!--<div class="col">
        <button routerLink="/login" class="w-100 btn btn-md btn-primary ">Back to login</button>
      </div>-->
    </div>
  </form>

  <div *ngIf="registrationSuccessful">
    <app-upload-documents [userData]="registeredUser" [backButtonUrl]="'register'"  [toUploadDocuments]="toUploadDocuments"></app-upload-documents>
  </div>
</main>
</body>

<!-- user already exists Modal-->
<div class="modal fade" id="userAlreadyExistsModal" tabindex="-1" role="dialog"
     aria-labelledby="viewSubscriptionItemModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="userAlreadyExistsModalLabel">My excuses</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container" id="main-container">
          <div class="row">
            <div class="col-lg-12 col-md-12 col-xl-12">
              <div class="alert alert-info" role="alert">
                <h4 class="alert-heading">Sorry this username has already been taken</h4>
                <p>Please try again</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
